#!/usr/bin/env bash

set -euo pipefail

OS="$(uname -s | tr '[:upper:]' '[:lower:]')"
ARCH="$(uname -m)"

if [[ "${OS}" == "darwin" ]]; then
    OS="macos"
fi

echo "Installing git, ripgrep, xclip, jq, tldr, and python3-pip for ${OS} on ${ARCH}..."

if [[ "${OS}" == "macos" ]]; then
    if ! command -v brew &> /dev/null; then
        echo "Homebrew is not installed. Please install Homebrew first."
        exit 1
    fi
    brew install git ripgrep xclip jq tldr python3
else
    if ! command -v apt &> /dev/null; then
        echo "apt is not available. This script is intended for Debian-based systems."
        exit 1
    fi
    sudo apt -y update
    sudo apt -y install git ripgrep xclip jq tldr python3-pip
fi

git clone git@github.com:junegunn/fzf.git $HOME/personal/fzf
$HOME/personal/fzf/install
